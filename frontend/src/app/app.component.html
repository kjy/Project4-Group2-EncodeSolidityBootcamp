<div class="px-4 py-5 my-5 text-center">
    <h1 class="display-5 fw-bold">Tokenized Ballot DApp</h1>

    <div class="col-lg-6 mx-auto">
        <div *ngIf="!wallet" class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            <button (click)="createWallet()" type="button" class="btn btn-success btn-lg px-4 gap-3">Create Wallet
            </button>
            <button type="button" class="btn btn-primary btn-lg px-4 gap-3" 
                data-bs-toggle="modal" data-bs-target="#importWallet">
                Import Wallet
            </button>
            <button (click)="connectWallet()" type="button" class="btn btn-danger btn-lg px-4 gap-3" disabled>Connect
                Wallet </button>
        </div>


        <div *ngIf="wallet">
            <div class="card border-0">
                <div class="card-body">
                    <h4 class="card-title">Wallet Address</h4>
                    <h6><a href='https://goerli.etherscan.io/address/{{wallet.address}}' target="_blank">View on
                            Etherscan</a></h6>
                    <p class="card-text">
                        {{wallet.address}} 
                            <button (click)="disconnectWallet()" type="button" class="btn btn-danger">
                                Disconnect
                            </button>
                    </p>

                </div>
            </div>
            <div class="card border-0">
                <div class="card-body">
                    <h4 class="card-title">Token Contract</h4>
                    <h6><a href='https://goerli.etherscan.io/address/{{tokenAddress}}' target="_blank">View on
                            Etherscan</a></h6>
                    <p class="card-text">
                        {{tokenAddress}}
                    </p>
                </div>
            </div>
            <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Your ETH Balance</h4>
                        <p class="card-text">
                            {{ethBalance}}
                        </p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Your token Balance</h4>
                        <p class="card-text">
                            {{tokenBalance}}
                        </p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Your Voting power is:</h4>
                        <p class="card-text">
                            {{votePower}}
                        </p>
                    </div>
                </div>
            </div>
            <button [disabled]="tokenRequestPending" (click)="requestTokensTen()" type="button"
                class="btn btn-success btn-lg px-4 gap-3">
                Request Tokens
            </button>
            <button type="button" class="btn btn-primary btn-lg px-4 m-3 gap-3" 
                data-bs-toggle="modal" data-bs-target="#transferTokens">
                Transfer Tokens
            </button>
            <button type="button" class="btn btn-primary btn-lg px-4 m-3 gap-3" 
                data-bs-toggle="modal" data-bs-target="#delegateTokens">
                Self Delegate
            </button>
        </div>
    </div>

    <div class="container my-4 text-center">
        <div class="row justify-content-center my-4">
            <div class="my-4">
                <div class="container border rounded m-4">
                    <div *ngIf="!ballotContractAddress" class="row m-4">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Address</span>
                            <input #ballotContractAddress type="text" class="form-control"
                                placeholder="Ballot contract address here">
                            <button (click)="connectBallotContract(ballotContractAddress.value)"
                                class="btn btn-success input-group-button">Connect</button>
                        </div>
                    </div>
                    <div *ngIf="ballotContractAddress" class="row m-4">
                        <p>Ballot contract address: {{ballotContractAddress}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--- IMPORT WALLET MODAL --->
<div class="modal fade" id="importWallet" tabindex="-1" aria-labelledby="importWalletLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="importWalletLabel">Wallet Import</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">(Make sure no thieves are looking)
                <div class="input-group mt-4">
                    <input #inputMnemonic type="text" class="form-control"
                        placeholder="Enter your mnumonic seed phrase">
                    <div class="input-group-append">
                        <button class="btn btn-success" data-bs-dismiss="modal" type="button"
                            (click)="importWallet(inputMnemonic.value, 'mnemonic')">Via Mnemonic</button>
                    </div>
                </div>
                <div class="input-group mt-4">
                    <input #inputPrivateKey type="text" value='73ca93ab7a1bd9a844c8efcff7141a54c423a333f83fd7e2d4bb28be22f6a7a8' class="form-control" placeholder="Enter your private key">
                    <div class="input-group-append">
                        <button class="btn btn-success" data-bs-dismiss="modal" type="button"
                            (click)="importWallet(inputPrivateKey.value, 'privatekey')">Via Private Key</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!--- TRANSFER TOKENS MODAL --->
<div class="modal fade" id="transferTokens" tabindex="-1" aria-labelledby="transferTokensLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="transferTokensLabel">Transfer Tokens</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">(It's their lucky day)
                <div class="input-group mt-4">
                    <div class="input-group-prepend">
                        <div class="input-group-text pe-1" >Transfer To</div>
                    </div>
                    <input #inputTransferTo type="text" class="form-control"
                        placeholder="Enter receiver's address">
                </div>
                <div class="input-group mt-4">
                    <div class="input-group-prepend">
                        <div class="input-group-text pe-4 ps-4">Amount </div>
                    </div>
                    <input #inputTransferAmount type="number" min='0' value='' class="form-control" placeholder="Enter amount to Transfer">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                    (click)="transferTokens(inputTransferTo.value, inputTransferAmount.value)">
                    Transfer
                </button>
            </div>
        </div>
    </div>
</div>

<!--- DELEGATE TOKENS MODAL --->
<div *ngIf="wallet" class="modal fade" id="delegateTokens" tabindex="-1" aria-labelledby="delegateTokensLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="delegateTokensLabel">Delegate Tokens</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">(So you want to try some governance?)
                <div class="input-group mt-4">
                    <div class="input-group-prepend">
                        <div class="input-group-text pe-1" >Delegate To</div>
                    </div>
                    <input #inputDelegateTo type="text" class="form-control"
                        value='{{wallet.address}}'
                        placeholder="Enter delegates address" disabled>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                    (click)="delegateTokens(inputDelegateTo.value)">
                    Delegate
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Connect wallet-->
<!-- Show eth balance, token balance, vote power -->
<!-- input for ballot contract or token contract-->
<!-- if token buttons for request, transfer-->
<!-- form for request -->
<!-- form for transfer -->
<!-- if ballot buttons for vote, delegate, result-->
<!-- form for vote -->
<!-- form for delegate -->
<!-- button to clear contract related actions -->
<!-- button to disconnect wallet -->